export interface DesiPricePoint {
  desi: number;
  price: number | null; // Bazı firmalar için null olabilir
}

export interface ShippingCarrierCosts {
  name: string;
  prices: DesiPricePoint[];
  fixedPrice?: number | null; // Borusan, Ceva, Horoz gibi sabit fiyatlılar için
}

// Görseldeki tabloya göre veri (KDV Hariç)
export const shippingCostsData: ShippingCarrierCosts[] = [
  {
    name: "Aras Kargo",
    prices: [
      { desi: 0, price: 66.49 },
      { desi: 1, price: 66.49 },
      { desi: 2, price: 71.50 },
      { desi: 3, price: 80.10 },
      { desi: 4, price: 87.30 },
      { desi: 5, price: 95.92 },
      { desi: 6, price: 104.50 },
      { desi: 7, price: 110.83 },
      { desi: 8, price: 118.24 },
      { desi: 9, price: 125.03 },
      { desi: 10, price: 131.86 },
      { desi: 11, price: 137.57 },
      { desi: 12, price: 143.36 },
      { desi: 13, price: 149.09 },
      { desi: 14, price: 154.86 },
      { desi: 15, price: 160.56 },
      { desi: 16, price: 169.55 },
      { desi: 17, price: 178.51 },
      { desi: 18, price: 187.51 },
      { desi: 19, price: 196.48 },
      { desi: 20, price: 205.47 },
      { desi: 21, price: 213.66 },
      { desi: 22, price: 221.88 },
      { desi: 23, price: 230.02 },
      { desi: 24, price: 238.25 },
      { desi: 25, price: 246.43 },
      { desi: 26, price: 254.33 },
      { desi: 27, price: 262.22 },
      { desi: 28, price: 270.13 },
      { desi: 29, price: 278.04 },
      { desi: 30, price: 285.94 },
      { desi: 31, price: 294.50 },
      { desi: 32, price: 303.07 },
      { desi: 33, price: 311.64 },
      { desi: 34, price: 320.20 },
      { desi: 35, price: 328.77 },
      { desi: 36, price: 337.34 },
      { desi: 37, price: 345.90 },
      { desi: 38, price: 354.47 },
      { desi: 39, price: 363.04 },
      { desi: 40, price: 371.60 },
      { desi: 41, price: 380.17 },
      { desi: 42, price: 388.74 },
      { desi: 43, price: 397.30 },
      { desi: 44, price: 405.87 },
      { desi: 45, price: 414.44 },
      { desi: 46, price: 423.00 },
      { desi: 47, price: 431.57 },
      { desi: 48, price: 440.14 },
      { desi: 49, price: 448.70 },
      { desi: 50, price: 457.27 },
      { desi: 51, price: 465.84 },
      { desi: 52, price: 474.40 },
    ],
  },
  {
    name: "Kolay Gelsin",
    prices: [
      { desi: 0, price: 69.91 },
      { desi: 1, price: 69.91 },
      { desi: 2, price: 71.90 },
      { desi: 3, price: 79.40 },
      { desi: 4, price: 84.90 },
      { desi: 5, price: 92.40 },
      { desi: 6, price: 99.90 },
      { desi: 7, price: 107.50 },
      { desi: 8, price: 115.19 },
      { desi: 9, price: 122.90 },
      { desi: 10, price: 129.00 },
      { desi: 11, price: 134.90 },
      { desi: 12, price: 140.00 },
      { desi: 13, price: 146.00 },
      { desi: 14, price: 152.00 },
      { desi: 15, price: 157.00 },
      { desi: 16, price: 171.90 },
      { desi: 17, price: 181.90 },
      { desi: 18, price: 190.90 },
      { desi: 19, price: 199.90 },
      { desi: 20, price: 208.90 },
      { desi: 21, price: 217.90 },
      { desi: 22, price: 226.90 },
      { desi: 23, price: 235.90 },
      { desi: 24, price: 244.90 },
      { desi: 25, price: 253.90 },
      { desi: 26, price: 262.90 },
      { desi: 27, price: 271.90 },
      { desi: 28, price: 280.90 },
      { desi: 29, price: 289.90 },
      { desi: 30, price: 298.90 },
      { desi: 31, price: 325.18 },
      { desi: 32, price: 341.45 },
      { desi: 33, price: 357.71 },
      { desi: 34, price: 373.99 },
      { desi: 35, price: 390.26 },
      { desi: 36, price: 406.53 },
      { desi: 37, price: 422.81 },
      { desi: 38, price: 439.08 },
      { desi: 39, price: 455.36 },
      { desi: 40, price: 471.63 },
      { desi: 41, price: 487.90 },
      { desi: 42, price: 507.90 },
      { desi: 43, price: 527.90 },
      { desi: 44, price: 547.90 },
      { desi: 45, price: 567.90 },
      { desi: 46, price: 587.90 },
      { desi: 47, price: 607.90 },
      { desi: 48, price: 627.90 },
      { desi: 49, price: 647.90 },
      { desi: 50, price: 667.90 },
      { desi: 51, price: 687.89 },
      { desi: 52, price: 707.89 },
    ],
  },
   {
    name: "MNG Kargo",
    prices: [
      { desi: 0, price: 71.99 },
      { desi: 1, price: 71.99 },
      { desi: 2, price: 71.99 },
      { desi: 3, price: 79.99 },
      { desi: 4, price: 89.99 },
      { desi: 5, price: 99.99 },
      { desi: 6, price: 108.99 },
      { desi: 7, price: 114.99 },
      { desi: 8, price: 122.99 },
      { desi: 9, price: 129.99 },
      { desi: 10, price: 135.99 },
      { desi: 11, price: 141.99 },
      { desi: 12, price: 149.99 },
      { desi: 13, price: 157.99 },
      { desi: 14, price: 166.99 },
      { desi: 15, price: 174.99 },
      { desi: 16, price: 187.99 },
      { desi: 17, price: 199.99 },
      { desi: 18, price: 212.99 },
      { desi: 19, price: 224.99 },
      { desi: 20, price: 237.99 },
      { desi: 21, price: 254.99 },
      { desi: 22, price: 271.99 },
      { desi: 23, price: 288.99 },
      { desi: 24, price: 305.99 },
      { desi: 25, price: 322.99 },
      { desi: 26, price: 339.99 },
      { desi: 27, price: 356.99 },
      { desi: 28, price: 373.99 },
      { desi: 29, price: 390.99 },
      { desi: 30, price: 407.99 },
      { desi: 31, price: 432.98 },
      { desi: 32, price: 457.97 },
      { desi: 33, price: 482.96 },
      { desi: 34, price: 507.95 },
      { desi: 35, price: 532.94 },
      { desi: 36, price: 557.93 },
      { desi: 37, price: 582.92 },
      { desi: 38, price: 607.91 },
      { desi: 39, price: 632.90 },
      { desi: 40, price: 657.89 },
      { desi: 41, price: 682.88 },
      { desi: 42, price: 707.87 },
      { desi: 43, price: 732.86 },
      { desi: 44, price: 757.85 },
      { desi: 45, price: 782.84 },
      { desi: 46, price: 807.83 },
      { desi: 47, price: 832.82 },
      { desi: 48, price: 857.81 },
      { desi: 49, price: 882.80 },
      { desi: 50, price: 907.79 },
      { desi: 51, price: 932.78 },
      { desi: 52, price: 957.77 },
    ],
  },
  {
    name: "PTT Kargo",
    prices: [
      { desi: 0, price: 62.03 },
      { desi: 1, price: 62.03 },
      { desi: 2, price: 62.03 },
      { desi: 3, price: 76.80 },
      { desi: 4, price: 76.80 },
      { desi: 5, price: 80.44 },
      { desi: 6, price: 85.47 },
      { desi: 7, price: 90.53 },
      { desi: 8, price: 100.59 },
      { desi: 9, price: 110.68 },
      { desi: 10, price: 125.81 },
      { desi: 11, price: 132.01 },
      { desi: 12, price: 138.64 },
      { desi: 13, price: 145.31 },
      { desi: 14, price: 151.95 },
      { desi: 15, price: 158.58 },
      { desi: 16, price: 165.22 },
      { desi: 17, price: 171.86 },
      { desi: 18, price: 178.50 },
      { desi: 19, price: 185.17 },
      { desi: 20, price: 191.81 },
      { desi: 21, price: 198.44 },
      { desi: 22, price: 205.08 },
      { desi: 23, price: 211.73 },
      { desi: 24, price: 218.36 },
      { desi: 25, price: 225.02 },
      { desi: 26, price: 231.66 },
      { desi: 27, price: 238.30 },
      { desi: 28, price: 244.94 },
      { desi: 29, price: 251.58 },
      { desi: 30, price: 258.23 },
      { desi: 31, price: 533.54 },
      { desi: 32, price: 546.41 },
      { desi: 33, price: 559.28 },
      { desi: 34, price: 572.14 },
      { desi: 35, price: 585.00 },
      { desi: 36, price: 597.87 },
      { desi: 37, price: 610.73 },
      { desi: 38, price: 623.60 },
      { desi: 39, price: 636.46 },
      { desi: 40, price: 649.33 },
      { desi: 41, price: 662.19 },
      { desi: 42, price: 675.06 },
      { desi: 43, price: 687.92 },
      { desi: 44, price: 700.78 },
      { desi: 45, price: 713.65 },
      { desi: 46, price: 726.52 },
      { desi: 47, price: 739.38 },
      { desi: 48, price: 752.24 },
      { desi: 49, price: 765.11 },
      { desi: 50, price: 777.98 },
      { desi: 51, price: 790.83 },
      { desi: 52, price: 803.70 },
    ],
  },
   {
    name: "Sürat Kargo",
    prices: [
      { desi: 0, price: 67.96 },
      { desi: 1, price: 67.96 },
      { desi: 2, price: 67.96 },
      { desi: 3, price: 75.86 },
      { desi: 4, price: 82.77 },
      { desi: 5, price: 87.39 },
      { desi: 6, price: 101.01 },
      { desi: 7, price: 107.84 },
      { desi: 8, price: 114.66 },
      { desi: 9, price: 121.49 },
      { desi: 10, price: 128.31 },
      { desi: 11, price: 137.46 },
      { desi: 12, price: 145.24 },
      { desi: 13, price: 151.07 },
      { desi: 14, price: 154.71 },
      { desi: 15, price: 160.41 },
      { desi: 16, price: 165.81 },
      { desi: 17, price: 174.57 },
      { desi: 18, price: 183.37 },
      { desi: 19, price: 192.15 },
      { desi: 20, price: 200.91 },
      { desi: 21, price: 209.97 },
      { desi: 22, price: 218.06 },
      { desi: 23, price: 226.06 },
      { desi: 24, price: 234.14 },
      { desi: 25, price: 242.19 },
      { desi: 26, price: 249.94 },
      { desi: 27, price: 257.71 },
      { desi: 28, price: 265.47 },
      { desi: 29, price: 273.24 },
      { desi: 30, price: 281.01 },
      { desi: 31, price: 336.17 },
      { desi: 32, price: 345.94 },
      { desi: 33, price: 355.75 },
      { desi: 34, price: 365.51 },
      { desi: 35, price: 375.31 },
      { desi: 36, price: 385.08 },
      { desi: 37, price: 394.85 },
      { desi: 38, price: 404.65 },
      { desi: 39, price: 414.42 },
      { desi: 40, price: 428.81 },
      { desi: 41, price: 438.68 },
      { desi: 42, price: 448.56 },
      { desi: 43, price: 458.47 },
      { desi: 44, price: 468.34 },
      { desi: 45, price: 478.24 },
      { desi: 46, price: 488.12 },
      { desi: 47, price: 497.99 },
      { desi: 48, price: 507.90 },
      { desi: 49, price: 517.78 },
      { desi: 50, price: 527.68 },
      { desi: 51, price: 537.55 },
      { desi: 52, price: 547.43 },
    ],
  },
  {
    name: "TEX Kargo", // Tabloda sadece TEX yazıyor
    prices: [
      { desi: 0, price: 61.04 },
      { desi: 1, price: 61.04 },
      { desi: 2, price: 62.85 },
      { desi: 3, price: 71.20 },
      { desi: 4, price: 76.46 },
      { desi: 5, price: 81.08 },
      { desi: 6, price: 91.69 },
      { desi: 7, price: 98.34 },
      { desi: 8, price: 105.22 },
      { desi: 9, price: 112.02 },
      { desi: 10, price: 118.36 },
      { desi: 11, price: 125.07 },
      { desi: 12, price: 129.95 },
      { desi: 13, price: 135.38 },
      { desi: 14, price: 140.79 },
      { desi: 15, price: 146.57 },
      { desi: 16, price: 153.82 },
      { desi: 17, price: 161.94 },
      { desi: 18, price: 170.10 },
      { desi: 19, price: 178.22 },
      { desi: 20, price: 186.23 },
      { desi: 21, price: 194.23 },
      { desi: 22, price: 201.63 },
      { desi: 23, price: 208.97 },
      { desi: 24, price: 216.36 },
      { desi: 25, price: 223.74 },
      { desi: 26, price: 230.86 },
      { desi: 27, price: 237.99 },
      { desi: 28, price: 245.12 },
      { desi: 29, price: 252.27 },
      { desi: 30, price: 259.36 },
      { desi: 31, price: 303.69 },
      { desi: 32, price: 316.76 },
      { desi: 33, price: 329.01 },
      { desi: 34, price: 339.38 },
      { desi: 35, price: 349.77 },
      { desi: 36, price: 360.14 },
      { desi: 37, price: 370.51 },
      { desi: 38, price: 380.90 },
      { desi: 39, price: 390.43 },
      { desi: 40, price: 402.44 },
      { desi: 41, price: 411.64 },
      { desi: 42, price: 420.84 },
      { desi: 43, price: 430.06 },
      { desi: 44, price: 439.26 },
      { desi: 45, price: 448.48 },
      { desi: 46, price: 457.68 },
      { desi: 47, price: 466.88 },
      { desi: 48, price: 476.10 },
      { desi: 49, price: 485.30 },
      { desi: 50, price: 494.51 },
      { desi: 51, price: 503.72 },
      { desi: 52, price: 512.92 },
    ],
  },
  {
    name: "Yurtiçi Kargo",
    prices: [
      { desi: 0, price: 86.74 },
      { desi: 1, price: 86.74 },
      { desi: 2, price: 86.74 },
      { desi: 3, price: 92.73 },
      { desi: 4, price: 94.72 },
      { desi: 5, price: 109.92 },
      { desi: 6, price: 113.50 },
      { desi: 7, price: 128.36 },
      { desi: 8, price: 133.30 },
      { desi: 9, price: 141.56 },
      { desi: 10, price: 147.81 },
      { desi: 11, price: 157.38 },
      { desi: 12, price: 167.27 },
      { desi: 13, price: 172.56 },
      { desi: 14, price: 186.07 },
      { desi: 15, price: 196.00 },
      { desi: 16, price: 201.61 },
      { desi: 17, price: 212.82 },
      { desi: 18, price: 223.37 },
      { desi: 19, price: 228.01 },
      { desi: 20, price: 232.92 },
      { desi: 21, price: 246.12 },
      { desi: 22, price: 253.72 },
      { desi: 23, price: 263.30 },
      { desi: 24, price: 268.57 },
      { desi: 25, price: 286.68 },
      { desi: 26, price: 313.43 },
      { desi: 27, price: 328.26 },
      { desi: 28, price: 343.12 },
      { desi: 29, price: 355.00 },
      { desi: 30, price: 358.63 },
      { desi: 31, price: 368.93 },
      { desi: 32, price: 379.23 },
      { desi: 33, price: 389.52 },
      { desi: 34, price: 399.82 },
      { desi: 35, price: 410.12 },
      { desi: 36, price: 420.41 },
      { desi: 37, price: 430.71 },
      { desi: 38, price: 441.01 },
      { desi: 39, price: 451.30 },
      { desi: 40, price: 461.60 },
      { desi: 41, price: 471.89 },
      { desi: 42, price: 482.19 },
      { desi: 43, price: 492.49 },
      { desi: 44, price: 502.78 },
      { desi: 45, price: 513.08 },
      { desi: 46, price: 523.38 },
      { desi: 47, price: 533.67 },
      { desi: 48, price: 543.97 },
      { desi: 49, price: 554.27 },
      { desi: 50, price: 564.56 },
      { desi: 51, price: 574.86 },
      { desi: 52, price: 585.16 },
    ],
  },
  {
    name: "Borusan Lojistik",
    prices: [], // Fiyat desi'ye göre değişmiyor
    fixedPrice: 352.42,
  },
  {
    name: "CEVA Lojistik",
    prices: [],
    fixedPrice: 465.49, // Tabloda 465,49 görünüyor
  },
  {
    name: "Horoz Lojistik",
    prices: [],
    fixedPrice: 431.15,
  },
];

// Yardımcı fonksiyon: Verilen desi ve kargo firmasına göre fiyatı bulur
// Eğer desi tam eşleşmezse, bir üst desi fiyatını alır (tablodaki gibi)
export function getShippingCost(carrierName: string, desi: number | null): number | null {
  if (desi === null || desi < 0) return null;

  const carrier = shippingCostsData.find(c => c.name === carrierName);
  if (!carrier) return null; // Firma bulunamadı

  // Sabit fiyatlı firma ise onu döndür
  if (carrier.fixedPrice !== undefined) {
    return carrier.fixedPrice;
  }

  // Desi bazlı fiyatlandırma
  if (!carrier.prices || carrier.prices.length === 0) return null; // Fiyat listesi yoksa

  // Desi'yi en yakın üst tam sayıya yuvarla (0 desi 0 kalmalı)
  const roundedDesi = desi === 0 ? 0 : Math.ceil(desi);

  // Fiyat listesinde desi'yi veya bir üstünü ara
  let foundPrice: number | null = null;
  // Desi'ye tam eşit veya büyük ilk kaydı bul
  for (const point of carrier.prices) {
      if (point.desi >= roundedDesi) {
          foundPrice = point.price;
          break;
      }
  }

  // Eğer desi listesindeki en yüksekten büyükse, son fiyatı kullan (veya null döndür? Şimdilik son fiyatı alalım)
  if (foundPrice === null && carrier.prices.length > 0) {
      foundPrice = carrier.prices[carrier.prices.length - 1].price;
  }

  return foundPrice;
} 